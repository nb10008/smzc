//-----------------------------------------------------------------------------
//!\file proof_policy.h
//!\author Aslan
//!
//!\date 2008-11-30
//! last 2008-11-30
//!
//!\brief 验证策略基类
//!
//!	Copyright (c) 2004 TENGWU Entertainment All rights reserved.
//-----------------------------------------------------------------------------
#pragma once

//-----------------------------------------------------------------------------
// 验证策略
//-----------------------------------------------------------------------------
class ProofPolicy
{
protected:
	//-------------------------------------------------------------------------
	// CONSTRUCT
	//-------------------------------------------------------------------------
	ProofPolicy() {}
	virtual ~ProofPolicy() {}

public:
	//-------------------------------------------------------------------------
	// 初始化和销毁
	//-------------------------------------------------------------------------
	virtual BOOL	Init(PROOFCALLBACK fn) = 0;
	virtual VOID	Destroy() = 0;

	//-------------------------------------------------------------------------
	// 验证服务器连接状态
	//-------------------------------------------------------------------------
	virtual INT GetProofServerStatus() = 0;

	//-------------------------------------------------------------------------
	// 验证接口
	//-------------------------------------------------------------------------
	virtual VOID	Proof(DWORD dwClientID, LPCSTR szAccoutName, LPCSTR szPsd, LPCSTR szGUID,DWORD dwIP,DWORD dwWorldNameCrc,DWORD dwChannelID,LPCSTR szMac,LPCSTR szUserID = NULL,LPCSTR szAppKey = NULL, LPCSTR szToken = NULL) = 0;

	//-------------------------------------------------------------------------
	// 设置回调函数
	//-------------------------------------------------------------------------
	VOID	SetProofCallback(PROOFCALLBACK fn)		{ ASSERT( P_VALID(fn) ); m_fnCallback = fn; }

	//-------------------------------------------------------------------------
	// 登出事件
	//-------------------------------------------------------------------------
	virtual VOID SigPlayerLogoutEvent(DWORD dwAccountID) = 0;

protected:
	PROOFCALLBACK			m_fnCallback;					// 回调函数
};